# 9 后续的请求/应答交换
------
每个端点都可以在任何时候生成后续的请求参照RFC3264. 章节8中的规则会导致控制端点在发现提名候选对与默认候选对不同时发送更新请求。
本章节定义了后续的请求/应答的规则。

ICE可以继续处理，而忽略掉后续的任何请求。

# 9.1 请求的生成
# 9.1.1 所有实现的处理流程
# 9.1.1.1 重启ICE
端点可以为一个存在的媒体流重启ICE。重启ICE，会使所有以前的ICE处理被终止并重新开始。ICE重启和一个全新的ICE媒体对话的唯一区别是，在重启时，数据依然可以在
此前的有效的通讯候选对上持续收发。

而端点必须重启ICE：
+ 媒体流的目标发生改变。即端点生成了一个更新请求，含有没有使用过的ICE，会导致媒体组件的目的地变成一个新的值。
+ 端点改变了它的实现层。这个一般发生在第三方控制情况下，信号层和媒体数据层区分开，而信号层改变了数据对话的目标到另外一个实例具有不一样的ICE实现。

这些规则使得把c行中的IP地址设置为0.0.0.0就会导致ICE重启。进一步的，ICE实现不能使用通话保持禁止，而应该使用a=inactive和a=sendonly（RFC3264).

重启ICE，端点需要修改媒体流请求中的ice-pwd和ice-ufrag.要注意，允许在请求中使用session-level属性,但是需要在后续的请求中使用和session-level同样的ice-pwd
和ice-ufrag.这不是密码的改变，只是密码表示方法的改变，这不会导致ICE重启。

而SDP剩下的部分就会和媒体流ICE初始请求时一样的（小节4.3）。接下来，候选地址可能包含以前该媒体流上的一些或者全部候选地址，或者都没有，也可能包含一些新的收集
到的候选(小节4.1.1)。

# 9.1.1.2 删除一个媒体流
如果端点通过设置一个媒体流的端口为0来删除了媒体流，那端点不能再为这个媒体流保留任意候选属性，也不要在保留任何ICE相关属性(章节15).


# 9.1.1.2 增加一个媒体流
当端点想增加一个媒体流时，在SDP中像初始请求一样填充属性值（小节4.3）。这会让ICE在这个媒体流上开始处理。


# 9.1.2 完全实现的流程
本章节描述了完全实现下对于已存在的媒体流的完全实现。

用户名片段，密码和实现层次必须和以前的一致。如果端点需要改变这些属性，就必须在这个媒体流上重启ICE。额外的行为取决于媒体流上ICE处理过程。

# 9.1.2.1 ICE运行状态下的媒体流








 









